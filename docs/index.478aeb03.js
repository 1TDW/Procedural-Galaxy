let e,t;function r(e){return e&&e.__esModule?e.default:e}var n={};function o(e,t){return"object"==typeof e?e:{x:e,y:t}}n=class{constructor(e,t){if(this.target=e,this.x=0,this.y=0,this.z=1,this.down=!1,this.offsetX=0,this.offsetY=0,this.startX=0,this.startY=0,this.movedX=0,this.movedY=0,this.active=!1,this.button=0,this.minZ=0,this.maxZ=1/0,"object"==typeof t){if(t.hasOwnProperty("button")){if("number"==typeof t.button&&t.button>=0)this.button=t.button;else throw TypeError("Button property must be a number and above or equal to 0")}if(t.hasOwnProperty("minZ")){if("number"==typeof t.minZ&&t.minZ>=0)this.minZ=t.minZ;else throw TypeError("minZ property must be a number and above or equal to 0")}if(t.hasOwnProperty("maxZ")){if("number"==typeof t.maxZ&&t.maxZ>=this.minZ)this.maxZ=t.maxZ;else throw TypeError(`MaxZ property must be a number and above or equal to minZ (= ${this.minZ})`)}}this.onMouseDown=e=>{e.button===this.button&&(this.down=!0,this.startX=e.clientX,this.startY=e.clientY,this.offsetX=this.x,this.offsetY=this.y)},this.onMouseMove=e=>{this.down&&(e.preventDefault(),this.x=this.offsetX+(this.startX-e.clientX)*this.z,this.y=this.offsetY+(this.startY-e.clientY)*this.z)},this.onMouseUp=e=>{this.down&&e.button===this.button&&(e.preventDefault(),this.down=!1)},this.onScroll=e=>{let t=(e.clientX-innerWidth/2)*this.z,r=(e.clientY-innerHeight/2)*this.z,n=e.deltaY/1250*this.z;this.z=Math.min(Math.max(this.z+n,this.minZ),this.maxZ);let o=(e.clientX-innerWidth/2)*this.z,i=(e.clientY-innerHeight/2)*this.z;this.x+=t-o,this.y+=r-i},2===this.button&&(this.onContextMenu=e=>{e.preventDefault()}),this.begin()}begin(){this.active=!0,this.target.addEventListener("mousedown",this.onMouseDown),this.target.addEventListener("contextmenu",this.onContextMenu),this.target.addEventListener("wheel",this.onScroll),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)}end(){this.active=!1,this.target.removeEventListener("mousedown",this.onMouseDown),this.target.removeEventListener("contextmenu",this.onContextMenu),this.target.removeEventListener("wheel",this.onScroll),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)}coordToScreenSpace(e,t){let{x:r,y:n}=o(e,t);return{x:(r-this.x)/this.z+innerWidth/2,y:(n-this.y)/this.z+innerHeight/2}}coordToClipSpace(e,t){return this.screenSpaceToClipSpace(this.coordToScreenSpace(o(e,t)))}screenSpaceToCoord(e,t){let{x:r,y:n}=o(e,t);return{x:(r-innerWidth/2)*this.z+this.x,y:(n-innerHeight/2)*this.z+this.y}}screenSpaceToClipSpace(e,t){let{x:r,y:n}=o(e,t);return{x:r/innerWidth*2-1,y:n/innerHeight*2-1}}clipSpaceToCoord(e,t){return this.screenSpaceToCoord(this.clipSpaceToScreenSpace(o(e,t)))}clipSpaceToScreenSpace(e,t){let{x:r,y:n}=o(e,t);return{x:(r+1)/2*innerWidth,y:(n+1)/2*innerHeight}}};var i={},a={};a="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 points;\nattribute vec2 position;\nattribute float size;\n\nuniform vec2 resolution;\nuniform vec3 camera;\n\nvarying float mass;\nvarying vec2 fragPos;\n\nvoid main() {\n    vec2 transform = points * size + position;\n\n    vec2 cameraSpace = (transform - camera.xy) / camera.z;\n\n    vec2 clipSpace = cameraSpace / resolution;\n\n    vec2 screenSpace = clipSpace * vec2(2.0, -2.0);\n\n    mass = size / 128.0;\n\n    fragPos = transform;\n\n    gl_Position = vec4(screenSpace, 0.0, 1.0);\n}";var s={};s="precision mediump float;\n#define GLSLIFY 1\n\nuniform float shaderType;\n\nvarying float mass;\nvarying vec2 fragPos;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 getColorOf(float mass) {\n    vec3 color = vec3(1.0, 1.0, 1.0); \n\n    vec3 red = vec3(1.0, 0.5, 0.2);\n    vec3 yellow = vec3(1.0, 1.0, 0.6);\n    vec3 white = vec3(1.0, 1.0, 1.0);\n    vec3 blue = vec3(0.5, 0.7, 1.0);\n\n    float RED_LIM = 0.05;\n    float YELLOW_LIM = 0.075;\n    float WHITE_LIM = 0.2;\n    float BLUE_LIM = 0.4;\n\n    if (mass <= RED_LIM) {\n        color = red;\n    } else if (mass <= YELLOW_LIM) {\n        color = mix(red, yellow, (mass - RED_LIM) / (YELLOW_LIM - RED_LIM));\n    } else if (mass <= WHITE_LIM) {\n        color = mix(yellow, white, (mass - YELLOW_LIM) / (WHITE_LIM - YELLOW_LIM));\n    } else if (mass <= BLUE_LIM) {\n        color = mix(white, blue, (mass - WHITE_LIM) / (BLUE_LIM - WHITE_LIM));\n    } else {\n        color = blue;\n    }\n\n    //color += vec3((rand(fragPos) - 0.5) / 4.0);\n\n    return color;\n}\n \nvoid main() {\n    vec3 color = vec3(0.0, 0.0, 0.0);\n\n    if (shaderType == 1.0) {\n        color = getColorOf(mass);\n    } else if (shaderType == 2.0) {\n        color = vec3(1.0, 1.0, 1.0);\n    } else if (shaderType == 3.0) {\n        color = vec3(fragPos.x / 999999.0, 1.0 - fragPos.x / 999999.0, 0.5 + fragPos.y / 999999.0);\n    }\n\n    gl_FragColor = vec4(color, 1.0);\n}";var l={};l="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform vec2 resolution;\nuniform vec3 camera;\n\nvarying vec2 fragPos;\n\nvoid main() {\n    vec2 cameraSpace = (position - camera.xy) / camera.z;\n\n    vec2 clipSpace = cameraSpace / resolution;\n\n    vec2 screenSpace = clipSpace * vec2(2.0, -2.0);\n\n    fragPos = position;\n\n    gl_Position = vec4(screenSpace, 0.0, 1.0);\n}";var u={};u="precision mediump float;\n#define GLSLIFY 1\n\nuniform float shaderType;\nuniform float lod;\n\nvarying vec2 fragPos;\n\nfloat round(float n) {\n    return floor(n + 0.5);\n}\n\nvec2 round(vec2 n) {\n    return vec2(round(n.x), round(n.y));\n}\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 getColorOf(float mass) {\n    vec3 color = vec3(1.0, 1.0, 1.0); \n\n    vec3 red = vec3(1.0, 0.5, 0.2);\n    vec3 yellow = vec3(1.0, 1.0, 0.6);\n    vec3 white = vec3(1.0, 1.0, 1.0);\n    vec3 blue = vec3(0.5, 0.7, 1.0);\n\n    float RED_LIM = 0.05;\n    float YELLOW_LIM = 0.075;\n    float WHITE_LIM = 0.2;\n    float BLUE_LIM = 0.4;\n\n    if (mass <= RED_LIM) {\n        color = red;\n    } else if (mass <= YELLOW_LIM) {\n        color = mix(red, yellow, (mass - RED_LIM) / (YELLOW_LIM - RED_LIM));\n    } else if (mass <= WHITE_LIM) {\n        color = mix(yellow, white, (mass - YELLOW_LIM) / (WHITE_LIM - YELLOW_LIM));\n    } else if (mass <= BLUE_LIM) {\n        color = mix(white, blue, (mass - WHITE_LIM) / (BLUE_LIM - WHITE_LIM));\n    } else {\n        color = blue;\n    }\n\n    return color;\n}\n\nvoid main() {\n    vec2 seed = mod(round(fragPos), 1000.0);\n\n    float value = (rand(seed) + rand(seed.yx)) / 2.0;\n\n    float brightness = pow(value, 5.0 - lod / 2.0);\n\n    float LOD_MIN = 0.75;\n    float LOD_MAX = 2.0;\n\n    if (lod < LOD_MIN) {\n        brightness = 0.0;\n    }\n\n    if (lod >= LOD_MIN && lod < LOD_MAX) {\n        brightness = mix(0.0, brightness, (lod - LOD_MIN) / (LOD_MAX - LOD_MIN));\n    }\n\n    if (brightness < 0.5) {\n        brightness /= 1.5;\n    }\n\n    if (brightness > 0.9 && lod >= 3.0) {\n        brightness = brightness * 2.0;\n    }\n\n    vec3 color = vec3(0.0, 0.0, 0.0);\n\n    if (shaderType == 1.0) {\n        color = getColorOf(brightness / 4.0) * brightness / 4.0;\n    } else if (shaderType == 2.0) {\n        color = vec3(brightness / 4.0);\n    } else if (shaderType == 3.0) {\n        color = vec3(fragPos.x / 999999.0, 1.0 - fragPos.x / 999999.0, 0.5 + fragPos.y / 999999.0);\n        color *= brightness / 4.0;\n    }\n \n    gl_FragColor = vec4(color, 1.0);\n}";var c={};class f{constructor(e=[]){this.points=e}push(...e){this.points.push(...e)}}f.from=function(e){return new f(e)},f.circleWithSides=function(e){let t=new f;for(let r=0;r<e;++r){let n=r/e*2*Math.PI,o=Math.sin(n),i=Math.cos(n),a=(r+1)/e*2*Math.PI,s=Math.sin(a),l=Math.cos(a);t.push(o,i,s,l,0,0)}return t},c=f;let d=Float32Array;function m(e,t,r){let n=new d(3);return e&&(n[0]=e),t&&(n[1]=t),r&&(n[2]=r),n}let h=Float32Array;function y(e,t,r){r=r||m();let n=t[0],o=t[1],i=t[2],a=n*e[3]+o*e[7]+i*e[11]+e[15];return r[0]=(n*e[0]+o*e[4]+i*e[8]+e[12])/a,r[1]=(n*e[1]+o*e[5]+i*e[9]+e[13])/a,r[2]=(n*e[2]+o*e[6]+i*e[10]+e[14])/a,r}function p(e,t,r){r=r||m();let n=t[0],o=t[1],i=t[2];return r[0]=n*e[0]+o*e[4]+i*e[8],r[1]=n*e[1]+o*e[5]+i*e[9],r[2]=n*e[2]+o*e[6]+i*e[10],r}const b={};function x(e){if(e instanceof Int8Array)return 5120;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return 5121;if(e instanceof Int16Array)return 5122;if(e instanceof Uint16Array)return 5123;if(e instanceof Int32Array)return 5124;if(e instanceof Uint32Array)return 5125;if(e instanceof Float32Array)return 5126;throw Error("unsupported typed array type")}function g(e){if(e===Int8Array)return 5120;if(e===Uint8Array||e===Uint8ClampedArray)return 5121;if(e===Int16Array)return 5122;if(e===Uint16Array)return 5123;if(e===Int32Array)return 5124;if(e===Uint32Array)return 5125;if(e===Float32Array)return 5126;throw Error("unsupported typed array type")}b[5120]=Int8Array,b[5121]=Uint8Array,b[5122]=Int16Array,b[5123]=Uint16Array,b[5124]=Int32Array,b[5125]=Uint32Array,b[5126]=Float32Array,b[32819]=Uint16Array,b[32820]=Uint16Array,b[33635]=Uint16Array,b[5131]=Uint16Array,b[33640]=Uint32Array,b[35899]=Uint32Array,b[35902]=Uint32Array,b[36269]=Uint32Array,b[34042]=Uint32Array;const v="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function E(...e){console.error(...e)}const A=new Map;function F(e,t){if(!e||"object"!=typeof e)return!1;let r=A.get(t);r||(r=new WeakMap,A.set(t,r));let n=r.get(e);if(void 0===n){let o=Object.prototype.toString.call(e);n=o.substring(8,o.length-1)===t,r.set(e,n)}return n}function S(e,t){return"undefined"!=typeof WebGLTexture&&F(t,"WebGLTexture")}const P={attribPrefix:""};function w(e,t,r,n){var o;if("undefined"!=typeof WebGLBuffer&&F(t,"WebGLBuffer"))return t;r=r||34962;let i=e.createBuffer();return o=r,e.bindBuffer(o,i),e.bufferData(o,t,n||35044),i}function T(e){return"indices"===e}function _(e){return e.length?e:e.data}const L=/coord|texture/i,M=/color|colour/i;function I(e,t,r){return e.numComponents||e.size||function(e,t){let r;if(t%(r=L.test(e)?2:M.test(e)?4:3)>0)throw Error(`Can not guess numComponents for attribute '${e}'. Tried ${r} but ${t} values is not evenly divisible by ${r}. You should specify it.`);return r}(t,r||_(e).length)}function z(e,t){if(v(e))return e;if(v(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type?R(e.type):void 0;return r||(r=T(t)?Uint16Array:Float32Array),new r(e.data)}function R(e){return"number"==typeof e?function(e){let t=b[e];if(!t)throw Error("unknown gl type");return t}(e):e||Float32Array}function C(e,t){var r;return{buffer:t.buffer,numValues:24,type:"number"==typeof(r=t.type)?r:r?g(r):5126,arrayType:R(t.type)}}function O(e,t){let r=t.data||t,n=R(t.type),o=r*n.BYTES_PER_ELEMENT,i=e.createBuffer();return e.bindBuffer(34962,i),e.bufferData(34962,o,t.drawType||35044),{buffer:i,numValues:r,type:g(n),arrayType:n}}function D(e,t,r){let n=z(t,r);return{arrayType:n.constructor,buffer:w(e,n,void 0,t.drawType),type:x(n),numValues:0}}const U=["position","positions","a_position"];function B(e,t,r){let n=function(e,t){let r={};return Object.keys(t).forEach(function(n){if(!T(n)){let o=t[n],i=o.attrib||o.name||o.attribName||P.attribPrefix+n;if(o.value){if(!Array.isArray(o.value)&&!v(o.value))throw Error("array.value is not array or typedarray");r[i]={value:o.value}}else{let t;t=o.buffer&&o.buffer instanceof WebGLBuffer?C:"number"==typeof o||"number"==typeof o.data?O:D;let{buffer:a,type:s,numValues:l,arrayType:u}=t(e,o,n),c=void 0!==o.normalize?o.normalize:u===Int8Array||u===Uint8Array,f=I(o,n,l);r[i]={buffer:a,numComponents:f,type:s,normalize:c,stride:o.stride||0,offset:o.offset||0,divisor:void 0===o.divisor?void 0:o.divisor,drawType:o.drawType}}}}),e.bindBuffer(34962,null),r}(e,t),o=Object.assign({},r||{});o.attribs=Object.assign({},r?r.attribs:{},n);let i=t.indices;if(i){let t=z(i,"indices");o.indices=w(e,t,34963),o.numElements=t.length,o.elementType=x(t)}else o.numElements||(o.numElements=function(e,t){var r;let n,o;for(o=0;o<U.length&&!((n=U[o])in t)&&!((n=P.attribPrefix+n)in t);++o);o===U.length&&(n=Object.keys(t)[0]);let i=t[n];if(!i.buffer)return 1;e.bindBuffer(34962,i.buffer);let a=e.getBufferParameter(34962,34660);e.bindBuffer(34962,null);let s=5120===(r=i.type)||5121===r?1:5122===r||5123===r?2:5124===r||5125===r||5126===r?4:0,l=i.numComponents||i.size,u=a/s/l;if(u%1!=0)throw Error(`numComponents ${l} not correct for length ${length}`);return u}(e,o.attribs));return o}function k(e,t,r){var n,o;let i,a=r||Float32Array;return n=new a(e*t),o=e,i=0,n.push=function(){for(let e=0;e<arguments.length;++e){let t=arguments[e];if(t instanceof Array||v(t))for(let e=0;e<t.length;++e)n[i++]=t[e];else n[i++]=t}},n.reset=function(e){i=e||0},n.numComponents=o,Object.defineProperty(n,"numElements",{get:function(){return this.length/this.numComponents|0}}),n}function W(e,t,r){let n=e.length,o=new Float32Array(3);for(let i=0;i<n;i+=3)r(t,[e[i],e[i+1],e[i+2]],o),e[i]=o[0],e[i+1]=o[1],e[i+2]=o[2]}function G(e,t,r){r=r||m();let n=t[0],o=t[1],i=t[2];return r[0]=n*e[0]+o*e[1]+i*e[2],r[1]=n*e[4]+o*e[5]+i*e[6],r[2]=n*e[8]+o*e[9]+i*e[10],r}function Y(e,t,r){return{position:{numComponents:2,data:[(t=t||0)+-1*(e=.5*(e||2)),(r=r||0)+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function j(e,t,r,n,o){var i,a,s;e=e||1,t=t||1,r=r||1,n=n||1,o=o||((s=s||new h(16))[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s);let l=(r+1)*(n+1),u=k(3,l),c=k(3,l),f=k(2,l);for(let o=0;o<=n;o++)for(let i=0;i<=r;i++){let a=i/r,s=o/n;u.push(e*a-.5*e,0,t*s-.5*t),c.push(0,1,0),f.push(a,s)}let d=r+1,m=k(3,r*n*2,Uint16Array);for(let e=0;e<n;e++)for(let t=0;t<r;t++)m.push((e+0)*d+t,(e+1)*d+t,(e+0)*d+t+1),m.push((e+1)*d+t,(e+1)*d+t+1,(e+0)*d+t+1);let b=(i={position:u,normal:c,texcoord:f,indices:m},a=o,Object.keys(i).forEach(function(e){let t=i[e];e.indexOf("pos")>=0?W(t,a,y):e.indexOf("tan")>=0||e.indexOf("binorm")>=0?W(t,a,p):e.indexOf("norm")>=0&&W(t,function(e,t){t=t||new h(16);let r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],m=e[11],y=e[12],p=e[13],b=e[14],x=e[15],g=d*x,v=b*m,E=l*x,A=b*u,F=l*m,S=d*u,P=o*x,w=b*i,T=o*m,_=d*i,L=o*u,M=l*i,I=c*p,z=y*f,R=a*p,C=y*s,O=a*f,D=c*s,U=r*p,B=y*n,k=r*f,W=c*n,G=r*s,Y=a*n,j=g*s+A*f+F*p-(v*s+E*f+S*p),H=v*n+P*f+_*p-(g*n+w*f+T*p),X=E*n+w*s+L*p-(A*n+P*s+M*p),N=S*n+T*s+M*f-(F*n+_*s+L*f),V=1/(r*j+a*H+c*X+y*N);return t[0]=V*j,t[1]=V*H,t[2]=V*X,t[3]=V*N,t[4]=V*(v*a+E*c+S*y-(g*a+A*c+F*y)),t[5]=V*(g*r+w*c+T*y-(v*r+P*c+_*y)),t[6]=V*(A*r+P*a+M*y-(E*r+w*a+L*y)),t[7]=V*(F*r+_*a+L*c-(S*r+T*a+M*c)),t[8]=V*(I*u+C*m+O*x-(z*u+R*m+D*x)),t[9]=V*(z*i+U*m+W*x-(I*i+B*m+k*x)),t[10]=V*(R*i+B*u+G*x-(C*i+U*u+Y*x)),t[11]=V*(D*i+k*u+Y*m-(O*i+W*u+G*m)),t[12]=V*(R*d+D*b+z*l-(O*b+I*l+C*d)),t[13]=V*(k*b+I*o+B*d-(U*d+W*b+z*o)),t[14]=V*(U*l+Y*b+C*o-(G*b+R*o+B*l)),t[15]=V*(G*d+O*o+W*l-(k*l+Y*d+D*o)),t}(a),G)}),i);return b}function H(e,t,r,n,o,i,a){if(t<=0||r<=0)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,o=o||Math.PI,i=i||0,a=a||2*Math.PI;let s=o-n,l=a-i,u=(t+1)*(r+1),c=k(3,u),f=k(3,u),d=k(2,u);for(let o=0;o<=r;o++)for(let a=0;a<=t;a++){let u=a/t,m=o/r,h=l*u+i,y=s*m+n,p=Math.sin(h),b=Math.cos(h),x=Math.sin(y),g=Math.cos(y),v=b*x,E=p*x;c.push(e*v,e*g,e*E),f.push(v,g,E),d.push(1-u,m)}let m=t+1,h=k(3,t*r*2,Uint16Array);for(let e=0;e<t;e++)for(let t=0;t<r;t++)h.push((t+0)*m+e,(t+0)*m+e+1,(t+1)*m+e),h.push((t+1)*m+e,(t+0)*m+e+1,(t+1)*m+e+1);return{position:c,normal:f,texcoord:d,indices:h}}const X=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function N(e){e=e||1;let t=e/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],i=k(3,24),a=k(3,24),s=k(2,24),l=k(3,12,Uint16Array);for(let e=0;e<6;++e){let t=X[e];for(let l=0;l<4;++l){let u=r[t[l]],c=n[e],f=o[l];i.push(u),a.push(c),s.push(f)}let u=4*e;l.push(u+0,u+1,u+2),l.push(u+0,u+2,u+3)}return{position:i,normal:a,texcoord:s,indices:l}}function V(e,t,r,n,o,i,a){if(n<3)throw Error("radialSubdivisions must be 3 or greater");if(o<1)throw Error("verticalSubdivisions must be 1 or greater");let s=void 0===i||i,l=void 0===a||a,u=(s?2:0)+(l?2:0),c=(n+1)*(o+1+u),f=k(3,c),d=k(3,c),m=k(2,c),h=k(3,n*(o+u/2)*2,Uint16Array),y=n+1,p=Math.atan2(e-t,r),b=Math.cos(p),x=Math.sin(p),g=s?-2:0,v=o+(l?2:0);for(let i=g;i<=v;++i){let a,s=i/o,l=r*s;i<0?(l=0,s=1,a=e):i>o?(l=r,s=1,a=t):a=e+(t-e)*(i/o),(-2===i||i===o+2)&&(a=0,s=0),l-=r/2;for(let e=0;e<y;++e){let t=Math.sin(e*Math.PI*2/n),r=Math.cos(e*Math.PI*2/n);f.push(t*a,l,r*a),i<0?d.push(0,-1,0):i>o?d.push(0,1,0):0===a?d.push(0,0,0):d.push(t*b,x,r*b),m.push(e/n,1-s)}}for(let e=0;e<o+u;++e)if((1!==e||!s)&&(e!==o+u-2||!l))for(let t=0;t<n;++t)h.push(y*(e+0)+0+t,y*(e+0)+1+t,y*(e+1)+1+t),h.push(y*(e+0)+0+t,y*(e+1)+1+t,y*(e+1)+0+t);return{position:f,normal:d,texcoord:m,indices:h}}function Z(e,t){t=t||[];let r=[];for(let n=0;n<e.length;n+=4){let o=e[n],i=e.slice(n+1,n+4);i.push.apply(i,t);for(let e=0;e<o;++e)r.push.apply(r,i)}return r}function q(){let e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=Z([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=Z([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,o={position:k(3,n),texcoord:k(2,n),normal:k(3,n),color:k(4,n,Uint8Array),indices:k(3,n/3,Uint16Array)};o.position.push(e),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(t),o.color.push(r);for(let e=0;e<n;++e)o.indices.push(e);return o}function K(e,t,r,n,o,i,a){if(o<=0)throw Error("subdivisionDown must be > 0");i=i||0,a=a||1;let s=a-i,l=(o+1)*8,u=k(3,l),c=k(3,l),f=k(2,l);function m(t,r,a,l,m,h){for(let g=0;g<=o;g++){let v=r/1,E=g/o,A=(v-.5)*2,F=(i+E*s)*Math.PI,S=Math.sin(F),P=Math.cos(F),w=e+(t-e)*S,T=A*n,_=P*e,L=S*w;u.push(T,_,L);var y,p,b=void 0,x=void 0;let M=(y=[0,S,P],(b=b||new d(3))[0]=y[0]*a[0],b[1]=y[1]*a[1],b[2]=y[2]*a[2],p=b,(x=x||new d(3))[0]=p[0]+l[0],x[1]=p[1]+l[1],x[2]=p[2]+l[2],x);c.push(M),f.push(v*m+h,E)}}for(let e=0;e<2;e++){let n=(e/1-.5)*2;m(t,e,[1,1,1],[0,0,0],1,0),m(t,e,[0,0,0],[n,0,0],0,0),m(r,e,[1,1,1],[0,0,0],1,0),m(r,e,[0,0,0],[n,0,0],0,1)}let h=k(3,2*o*4,Uint16Array);function y(e,t){for(let r=0;r<o;++r)h.push(e+r+0,e+r+1,t+r+0),h.push(e+r+1,t+r+1,t+r+0)}let p=o+1;return y(0*p,4*p),y(5*p,7*p),y(6*p,2*p),y(3*p,1*p),{position:u,normal:c,texcoord:f,indices:h}}function J(e,t,r,n,o,i){return V(e,e,t,r,n,o,i)}function Q(e,t,r,n,o,i){if(r<3)throw Error("radialSubdivisions must be 3 or greater");if(n<3)throw Error("verticalSubdivisions must be 3 or greater");o=o||0,i=i||2*Math.PI;let a=i-o,s=r+1,l=n+1,u=s*l,c=k(3,u),f=k(3,u),d=k(2,u),m=k(3,r*n*2,Uint16Array);for(let i=0;i<l;++i){let l=i/n,u=l*Math.PI*2,m=Math.sin(u),h=e+m*t,y=Math.cos(u),p=y*t;for(let e=0;e<s;++e){let t=e/r,n=o+t*a,i=Math.sin(n),s=Math.cos(n),u=i*h,b=s*h,x=i*m,g=s*m;c.push(u,p,b),f.push(x,y,g),d.push(t,1-l)}}for(let e=0;e<n;++e)for(let t=0;t<r;++t){let r=1+t,n=1+e;m.push(s*e+t,s*n+t,s*e+r),m.push(s*n+t,s*n+r,s*e+r)}return{position:c,normal:f,texcoord:d,indices:m}}function ee(e,t,r,n,o){if(t<3)throw Error("divisions must be at least 3");r=r||1,o=o||1,n=n||0;let i=(t+1)*(r+1),a=k(3,i),s=k(3,i),l=k(2,i),u=k(3,r*t*2,Uint16Array),c=0,f=e-n,d=t+1;for(let e=0;e<=r;++e){let i=n+f*Math.pow(e/r,o);for(let n=0;n<=t;++n){let o=2*Math.PI*n/t,f=i*Math.cos(o),m=i*Math.sin(o);if(a.push(f,0,m),s.push(0,1,0),l.push(1-n/t,e/r),e>0&&n!==t){let e=c+(n+1),t=c+n,r=c+n-d,o=c+(n+1)-d;u.push(e,t,r),u.push(e,r,o)}}c+=t+1}return{position:a,normal:s,texcoord:l,indices:u}}function et(e){return function(t){let r=e.apply(this,Array.prototype.slice.call(arguments,1));return function(e,t){let r={};return Object.keys(t).forEach(function(n){r[n]=function(e,t,r){let n="indices"===r?34963:34962,o=z(t,r);return w(e,o,n)}(e,t[n],n)}),t.indices?(r.numElements=t.indices.length,r.elementType=x(z(t.indices))):r.numElements=function(e){let t,r;for(r=0;r<U.length&&!((t=U[r])in e);++r);r===U.length&&(t=Object.keys(e)[0]);let n=e[t],o=_(n).length;if(void 0===o)return 1;let i=I(n,t);if(o%i>0)throw Error(`numComponents ${i} not correct for length ${o}`);return o/i}(t),r}(t,r)}}function er(e){return function(t){let r=e.apply(null,Array.prototype.slice.call(arguments,1));return B(t,r)}}function en(e){return!!e.texStorage2D}er(q),et(q),er(N),et(N),er(j),et(j),er(H),et(H),er(V),et(V),er(Y),et(Y),er(K),et(K),er(J),et(J),er(Q),et(Q),er(ee),et(ee);const eo=function(){let e={},t={};return function(r,n){return!function(r){let n=r.constructor.name;if(!e[n]){for(let e in r)if("number"==typeof r[e]){let n=t[r[e]];t[r[e]]=n?`${n} | ${e}`:e}e[n]=!0}}(r),t[n]||("number"==typeof n?`0x${n.toString(16)}`:n)}}(),ei={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},ea={};function es(t){if(!e){let t={};t[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},t[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},t[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},t[6407]={textureFormat:6407,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},t[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},t[6402]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5125,5123]},t[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[5121]},t[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[5120]},t[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},t[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[5126]},t[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5121]},t[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5120]},t[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5123]},t[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5122]},t[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},t[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5124]},t[33323]={textureFormat:33319,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[5121]},t[36757]={textureFormat:33319,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[5120]},t[33327]={textureFormat:33319,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},t[33328]={textureFormat:33319,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[5126]},t[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5121]},t[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5120]},t[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5123]},t[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5122]},t[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5125]},t[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5124]},t[32849]={textureFormat:6407,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[5121]},t[35905]={textureFormat:6407,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5121]},t[36194]={textureFormat:6407,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},t[36758]={textureFormat:6407,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5120]},t[35898]={textureFormat:6407,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},t[35901]={textureFormat:6407,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},t[34843]={textureFormat:6407,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},t[34837]={textureFormat:6407,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5126]},t[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5121]},t[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5120]},t[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5123]},t[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5122]},t[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5125]},t[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5124]},t[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},t[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},t[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[5120]},t[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},t[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},t[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[33640]},t[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},t[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[5126]},t[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5121]},t[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5120]},t[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[33640]},t[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5123]},t[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5122]},t[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5124]},t[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5125]},t[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},t[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},t[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5126]},t[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},t[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(t).forEach(function(e){let r=t[e];r.bytesPerElementMap={},r.bytesPerElement.forEach(function(e,t){let n=r.type[t];r.bytesPerElementMap[n]=e})}),e=t}return e[t]}ea[6406]={numColorComponents:1},ea[6409]={numColorComponents:1},ea[6410]={numColorComponents:2},ea[6407]={numColorComponents:3},ea[6408]={numColorComponents:4},ea[6403]={numColorComponents:1},ea[36244]={numColorComponents:1},ea[33319]={numColorComponents:2},ea[33320]={numColorComponents:2},ea[6407]={numColorComponents:3},ea[36248]={numColorComponents:3},ea[6408]={numColorComponents:4},ea[36249]={numColorComponents:4},ea[6402]={numColorComponents:1},ea[34041]={numColorComponents:2};function el(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(37443,t.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(37441,t.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(37440,t.flipY)}function eu(e,t,r,n,o,i){r=r||ei.textureOptions,i=i||6408;let a=r.target||3553;if(n=n||r.width,o=o||r.height,e.bindTexture(a,t),function(e,t,r,n){if(!en(e))return(t&t-1)==0&&(r&r-1)==0;let o=es(n);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}(e,n,o,i))e.generateMipmap(a);else{let t=!function(e){let t=es(e);if(!t)throw"unknown internal format";return t.textureFilterable}(i)?9728:9729;e.texParameteri(a,10241,t),e.texParameteri(a,10240,t),e.texParameteri(a,10242,33071),e.texParameteri(a,10243,33071)}}function ec(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function ef(e,t){var r,n;let o=(r=0,(n=(n=t)||{}).cubeFaceOrder||[34069,34070,34071,34072,34073,34074]),i=o.map(function(e,t){return{face:e,ndx:t}});return i.sort(function(e,t){return e.face-t.face}),i}function ed(){}function em(e){return"undefined"!=typeof document&&document.getElementById?document.getElementById(e):null}const eh={};function ey(e,t){return eh[t].bindPoint}function ep(e,t){return function(r){e.uniform1i(t,r)}}function eb(e,t){return function(r){e.uniform1iv(t,r)}}function ex(e,t){return function(r){e.uniform2iv(t,r)}}function eg(e,t){return function(r){e.uniform3iv(t,r)}}function ev(e,t){return function(r){e.uniform4iv(t,r)}}function eE(e,t,r,n){let o=ey(e,t);return en(e)?function(t){let i,a;!t||S(e,t)?(i=t,a=null):(i=t.texture,a=t.sampler),e.uniform1i(n,r),e.activeTexture(33984+r),e.bindTexture(o,i),e.bindSampler(r,a)}:function(t){e.uniform1i(n,r),e.activeTexture(33984+r),e.bindTexture(o,t)}}function eA(e,t,r,n,o){let i=ey(e,t),a=new Int32Array(o);for(let e=0;e<o;++e)a[e]=r+e;return en(e)?function(t){e.uniform1iv(n,a),t.forEach(function(t,n){let o,s;e.activeTexture(33984+a[n]),!t||S(e,t)?(o=t,s=null):(o=t.texture,s=t.sampler),e.bindSampler(r,s),e.bindTexture(i,o)})}:function(t){e.uniform1iv(n,a),t.forEach(function(t,r){e.activeTexture(33984+a[r]),e.bindTexture(i,t)})}}function eF(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(34962,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||5126,r.normalize||!1,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function eS(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4===r.value.length)e.vertexAttrib4iv(t,r.value);else throw Error("The length of an integer constant value must be 4!")}else e.bindBuffer(34962,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||5124,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function eP(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4===r.value.length)e.vertexAttrib4uiv(t,r.value);else throw Error("The length of an unsigned integer constant value must be 4!")}else e.bindBuffer(34962,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||5125,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function ew(e,t,r){let n=r.size,o=r.count;return function(r){e.bindBuffer(34962,r.buffer);let i=r.size||r.numComponents||n,a=i/o,s=r.type||5126,l=eh[s],u=l.size*i,c=r.normalize||!1,f=r.offset||0,d=u/o;for(let n=0;n<o;++n)e.enableVertexAttribArray(t+n),e.vertexAttribPointer(t+n,a,s,c,u,f+d*n),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+n,r.divisor||0)}}eh[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},eh[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}},cols:2},eh[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}},cols:3},eh[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}},cols:4},eh[5124]={Type:Int32Array,size:4,setter:ep,arraySetter:eb},eh[35667]={Type:Int32Array,size:8,setter:ex,cols:2},eh[35668]={Type:Int32Array,size:12,setter:eg,cols:3},eh[35669]={Type:Int32Array,size:16,setter:ev,cols:4},eh[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},eh[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}},cols:2},eh[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}},cols:3},eh[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}},cols:4},eh[35670]={Type:Uint32Array,size:4,setter:ep,arraySetter:eb},eh[35671]={Type:Uint32Array,size:8,setter:ex,cols:2},eh[35672]={Type:Uint32Array,size:12,setter:eg,cols:3},eh[35673]={Type:Uint32Array,size:16,setter:ev,cols:4},eh[35674]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}},rows:2,cols:2},eh[35675]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}},rows:3,cols:3},eh[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}},rows:4,cols:4},eh[35685]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}},rows:2,cols:3},eh[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}},rows:2,cols:4},eh[35687]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}},rows:3,cols:2},eh[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}},rows:3,cols:4},eh[35689]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}},rows:4,cols:2},eh[35690]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}},rows:4,cols:3},eh[35678]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:3553},eh[35680]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:34067},eh[35679]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:32879},eh[35682]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:3553},eh[36289]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:35866},eh[36292]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:35866},eh[36293]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:34067},eh[36298]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:3553},eh[36299]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:32879},eh[36300]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:34067},eh[36303]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:35866},eh[36306]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:3553},eh[36307]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:32879},eh[36308]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:34067},eh[36311]={Type:null,size:0,setter:eE,arraySetter:eA,bindPoint:35866};const eT={};eT[5126]={size:4,setter:eF},eT[35664]={size:8,setter:eF},eT[35665]={size:12,setter:eF},eT[35666]={size:16,setter:eF},eT[5124]={size:4,setter:eS},eT[35667]={size:8,setter:eS},eT[35668]={size:12,setter:eS},eT[35669]={size:16,setter:eS},eT[5125]={size:4,setter:eP},eT[36294]={size:8,setter:eP},eT[36295]={size:12,setter:eP},eT[36296]={size:16,setter:eP},eT[35670]={size:4,setter:eS},eT[35671]={size:8,setter:eS},eT[35672]={size:12,setter:eS},eT[35673]={size:16,setter:eS},eT[35674]={size:4,setter:ew,count:2},eT[35675]={size:9,setter:ew,count:3},eT[35676]={size:16,setter:ew,count:4};const e_=/ERROR:\s*\d+:(\d+)/gi,eL=/^[ \t]*\n/;function eM(e){let t=0;return eL.test(e)&&(t=1,e=e.replace(eL,"")),{lineOffset:t,shaderSource:e}}function eI(e,t,r){let n,o,i;if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e)r=e,e=void 0;else if(e&&!Array.isArray(e)){let t=e;r=t.errorCallback,e=t.attribLocations,n=t.transformFeedbackVaryings,o=t.transformFeedbackMode,i=t.callback}let a=r||E,s=[],l={errorCallback(e,...t){s.push(e),a(e,...t)},transformFeedbackVaryings:n,transformFeedbackMode:o,callback:i,errors:s};{let r={};Array.isArray(e)?e.forEach(function(e,n){r[e]=t?t[n]:n}):r=e||{},l.attribLocations=r}return l}const ez=["VERTEX_SHADER","FRAGMENT_SHADER"],eR=(e=0)=>new Promise(t=>setTimeout(t,e));function eC(e,t,r){let n=e.createProgram(),{attribLocations:o,transformFeedbackVaryings:i,transformFeedbackMode:a}=eI(r);for(let r=0;r<t.length;++r){let o=t[r];if("string"==typeof o){let t=em(o),i=t?t.text:o,a=e[ez[r]];if(t&&t.type){var s;a=((s=t.type).indexOf("frag")>=0?35632:s.indexOf("vert")>=0?35633:void 0)||a}o=e.createShader(a),e.shaderSource(o,eM(i).shaderSource),e.compileShader(o),e.attachShader(n,o)}}Object.entries(o).forEach(([t,r])=>e.bindAttribLocation(n,r,t));{let t=i;t&&(t.attribs&&(t=t.attribs),Array.isArray(t)||(t=Object.keys(t)),e.transformFeedbackVaryings(n,t,a||35981))}return e.linkProgram(n),n}function eO(e,t,r,n,o){let i=eI(r,n,o),a=new Set(t),s=eC(e,t,i);function l(e,t){let r=ek(e,t,i.errorCallback);return r&&function(e,t,r){let n=e.getAttachedShaders(t);for(let t of n)r.has(t)&&e.deleteShader(t);e.deleteProgram(t)}(e,t,a),r}if(i.callback){eU(e,s).then(()=>{let t=l(e,s);i.callback(t,t?void 0:s)});return}return l(e,s)?void 0:s}function eD(e){return function(t,r,...n){return new Promise((o,i)=>{let a=eI(...n);a.callback=(e,t)=>{e?i(e):o(t)},e(t,r,a)})}}async function eU(e,t){let r=e.getExtension("KHR_parallel_shader_compile"),n=r?(e,t)=>e.getProgramParameter(t,r.COMPLETION_STATUS_KHR):()=>!0,o=0;do await eR(o),o=1e3/60;while(!n(e,t))}async function eB(e,t){for(let r of Object.values(t))await eU(e,r)}function ek(e,t,r){r=r||E;let n=e.getProgramParameter(t,35714);if(!n){let n=e.getProgramInfoLog(t);r(`Error in program linking: ${n}`);let o=e.getAttachedShaders(t),i=o.map(t=>(function(e,t,r,n){n=n||E;let o=e.getShaderParameter(r,35713);if(!o){let o=e.getShaderInfoLog(r),{lineOffset:i,shaderSource:a}=eM(e.getShaderSource(r)),s=`${function(e,t="",r=0){let n=[...t.matchAll(e_)],o=new Map(n.map((e,r)=>{let o=parseInt(e[1]),i=n[r+1],a=i?i.index:t.length,s=t.substring(e.index,a);return[o-1,s]}));return e.split("\n").map((e,t)=>{let n=o.get(t);return`${t+1+r}: ${e}${n?`

^^^ ${n}`:""}`}).join("\n")}(a,o,i)}
Error compiling ${eo(e,t)}: ${o}`;return n(s),s}return""})(e,e.getShaderParameter(t,e.SHADER_TYPE),t,r));return`${n}
${i.filter(e=>e).join("\n")}`}}function eW(e){let t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}eD(eO),eD(eN);const eG=/(\.|\[|]|\w+)/g,eY=e=>e>="0"&&e<="9";function ej(e,...t){let r=e.uniformSetters||e,n=t.length;for(let e=0;e<n;++e){let n=t[e];if(Array.isArray(n)){let e=n.length;for(let t=0;t<e;++t)ej(r,n[t])}else for(let e in n){let t=r[e];t&&t(n[e])}}}function e$(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(function(e,t){for(let r in t){let n=e[r];n&&n(t[r])}}(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(34963,r.indices))}function eH(e,t){let r=function(e,t){let r=0,n={},o={},i=e.getProgramParameter(t,35718);for(let a=0;a<i;++a){let i=e.getActiveUniform(t,a);if(eW(i))continue;let s=i.name;s.endsWith("[0]")&&(s=s.substr(0,s.length-3));let l=e.getUniformLocation(t,i.name);if(l){let t=function(t,n,o){let i;let a=n.name.endsWith("[0]"),s=n.type,l=eh[s];if(!l)throw Error(`unknown type: 0x${s.toString(16)}`);if(l.bindPoint){let t=r;r+=n.size,i=a?l.arraySetter(e,s,t,o,n.size):l.setter(e,s,t,o,n.size)}else i=l.arraySetter&&a?l.arraySetter(e,o):l.setter(e,o);return i.location=o,i}(0,i,l);n[s]=t,function(e,t,r,n){let o=e.split(eG).filter(e=>""!==e),i=0,a="";for(;;){let e=o[i++];a+=e;let s=eY(e[0]),l=s?parseInt(e):e;s&&(a+=o[i++]);let u=i===o.length;if(u){r[l]=t;break}{let e=o[i++],t="["===e,s=r[l]||(t?[]:{});r[l]=s,r=s,n[a]=n[a]||function(e){return function(t){(function e(t,r){for(let n in r){let o=t[n];"function"==typeof o?o(r[n]):e(t[n],r[n])}})(e,t)}}(s),a+=e}}}(s,t,o,n)}}return n}(e,t),n=function(e,t){let r={},n=e.getProgramParameter(t,35721);for(let o=0;o<n;++o){let n=e.getActiveAttrib(t,o);if(eW(n))continue;let i=e.getAttribLocation(t,n.name),a=eT[n.type],s=a.setter(e,i,a);s.location=i,r[n.name]=s}return r}(e,t),o={program:t,uniformSetters:r,attribSetters:n};return en(e)&&(o.uniformBlockSpec=function(e,t){let r=e.getProgramParameter(t,35718),n=[],o=[];for(let i=0;i<r;++i){o.push(i),n.push({});let r=e.getActiveUniform(t,i);n[i].name=r.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(r){let i=r[0],a=r[1];e.getActiveUniforms(t,o,e[i]).forEach(function(e,t){n[t][a]=e})});let i={},a=e.getProgramParameter(t,35382);for(let r=0;r<a;++r){let n=e.getActiveUniformBlockName(t,r),o={index:e.getUniformBlockIndex(t,n),usedByVertexShader:e.getActiveUniformBlockParameter(t,r,35396),usedByFragmentShader:e.getActiveUniformBlockParameter(t,r,35398),size:e.getActiveUniformBlockParameter(t,r,35392),uniformIndices:e.getActiveUniformBlockParameter(t,r,35395)};o.used=o.usedByVertexShader||o.usedByFragmentShader,i[n]=o}return{blockSpecs:i,uniformData:n}}(e,t),o.transformFeedbackInfo=function(e,t){let r={},n=e.getProgramParameter(t,35971);for(let o=0;o<n;++o){let n=e.getTransformFeedbackVarying(t,o);r[n.name]={index:o,type:n.type,size:n.size}}return r}(e,t)),o}const eX=/\s|{|}|;/;function eN(e,t,r,n,o){let i=eI(r,n,o),a=[];if(t=t.map(function(e){if(!eX.test(e)){let t=em(e);if(t)e=t.text;else{let t=`no element with id: ${e}`;i.errorCallback(t),a.push(t)}}return e}),a.length)return i.errorCallback(""),i.callback&&setTimeout(()=>{i.callback(`
${i.errors.join("\n")}`)}),null;let s=i.callback;s&&(i.callback=(t,r)=>{s(t,t?void 0:eH(e,r))});let l=eO(e,t,i,void 0,void 0);return l?eH(e,l):null}function eV(e,t,r,n,o){for(let[i,a]of Object.entries(t)){let s={...o},l=r[i];Array.isArray(l)||Object.assign(s,l);let u=ek(e,a,s.errorCallback);if(u){for(let r of Object.values(t)){let t=e.getAttachedShaders(r);for(let o of(e.deleteProgram(r),t))n.has(o)||e.deleteShader(o)}return u}}}function eZ(e,t,r={}){let n=new Set,o=Object.fromEntries(Object.entries(t).map(([t,o])=>{let i={...r},a=Array.isArray(o)?o:o.shaders;return Array.isArray(o)||Object.assign(i,o),a.forEach(n.add,n),[t,eC(e,a,i)]}));if(r.callback){eB(e,o).then(()=>{let i=eV(e,o,t,n,r);r.callback(i,i?void 0:o)});return}let i=eV(e,o,t,n,r);return i?void 0:o}eD(eZ),eD(function(e,t,r){function n(e,t){return Object.fromEntries(Object.entries(t).map(([t,r])=>[t,eH(e,r)]))}r=eI(r);let o=r.callback;o&&(r.callback=(t,r)=>{o(t,t?void 0:n(e,r))});let i=eZ(e,t,r);if(!o&&i)return n(e,i)});const eq={};eq[34041]=33306,eq[6401]=36128,eq[36168]=36128,eq[6402]=36096,eq[33189]=36096,eq[33190]=36096,eq[36012]=36096,eq[35056]=33306,eq[36013]=33306;const eK={};eK[32854]=!0,eK[32855]=!0,eK[36194]=!0,eK[34041]=!0,eK[33189]=!0,eK[6401]=!0,eK[36168]=!0;const eJ=/^(.*?)_/,eQ=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];var e0={};e0={getShaderType:()=>$(".shader-options > input:checked").attr("id")},i=class{constructor(e){if(this.gl=e.getContext("webgl")||e.getContext("expiremental-webgl"),function(e){for(let t=0;t<eQ.length;++t)!function(e,t){eo(e,0);let r=e.getExtension(t);if(r){let n={},o=eJ.exec(t)[1],i="_"+o;for(let t in r){let a=r[t],s="function"==typeof a,l=s?o:i,u=t;t.endsWith(l)&&(u=t.substring(0,t.length-l.length)),void 0!==e[u]?s||e[u]===a||function(...e){console.warn(...e)}(u,e[u],a,t):s?e[u]=function(e){return function(){return e.apply(r,arguments)}}(a):(e[u]=a,n[u]=a)}n.constructor={name:r.constructor.name},eo(n,0)}}(e,eQ[t])}(this.gl),this.ext=this.gl.getExtension("ANGLE_instanced_arrays"),!this.ext)throw Error("ANGLE_instanced_arrays not supported");this.programInfo=eN(this.gl,[r(a),r(s)]),this.bgProgramInfo=eN(this.gl,[r(l),r(u)]),this.data=[]}bindCamera(e){this.camera=e}bindData(e){this.data=e}bindBgData(){let{x:e,y:t}=this.camera.screenSpaceToCoord(0,0),{x:r,y:n}=this.camera.screenSpaceToCoord(innerWidth,innerHeight);this.bgData={position:{numComponents:2,data:[e,t,e,n,r,n,r,n,r,t,e,t]}}}bindInfo(e){this.info=e}getShaderType(){let e=e0.getShaderType();switch(e){case"realistic":return 1;case"black-white":return 2;case"xy":return 3}}render(){this.gl.canvas.width=innerWidth,this.gl.canvas.height=innerHeight,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.CULL_FACE),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.renderStars(),this.info.lod>1&&(this.bindBgData(),this.renderBg())}renderStars(){let e=this.getShaderType(),t={resolution:[innerWidth,innerHeight],camera:[this.camera.x,this.camera.y,this.camera.z],shaderType:e};this.bufferInfo=B(this.gl,this.data),this.vertexArrayInfo=function(e,t,r){let n=e.createVertexArray();return e.bindVertexArray(n),t.length||(t=[t]),t.forEach(function(t){e$(e,t,r)}),e.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:n}}(this.gl,this.programInfo,this.bufferInfo),this.gl.useProgram(this.programInfo.program),e$(this.gl,this.programInfo,this.vertexArrayInfo),ej(this.programInfo,t),this.ext.drawArraysInstancedANGLE(this.gl.TRIANGLES,0,this.data.points.data.length/2,this.data.size.data.length)}renderBg(){let e=this.getShaderType(),t={resolution:[innerWidth,innerHeight],camera:[this.camera.x,this.camera.y,this.camera.z],shaderType:e,lod:this.info.lod};this.bgBufferInfo=B(this.gl,this.bgData),this.gl.useProgram(this.bgProgramInfo.program),e$(this.gl,this.bgProgramInfo,this.bgBufferInfo),ej(this.bgProgramInfo,t),function(e,t,r,n,o,i){r=void 0===r?4:r;let a=t.indices,s=t.elementType,l=void 0===n?t.numElements:n;o=void 0===o?0:o,s||a?void 0!==i?e.drawElementsInstanced(r,l,void 0===s?5123:t.elementType,o,i):e.drawElements(r,l,void 0===s?5123:t.elementType,o):void 0!==i?e.drawArraysInstanced(r,o,l,i):e.drawArrays(r,o,l)}(this.gl,this.bgBufferInfo)}};var e1={};const e3=c.circleWithSides(16),e2={lodLevel:0,stars:[],starRenderData:{points:{numComponents:2,data:e3.points},position:{numComponents:2,data:[],divisor:1},size:{numComponents:1,data:[],divisor:1}},starRenderDataTyped:{points:{numComponents:2,data:e3.points},position:{numComponents:2,data:new Float32Array(0),divisor:1},size:{numComponents:1,data:new Float32Array(0),divisor:1}}};for(let e=0;e<8;++e)e2.stars.push({start:{x:0,y:0},end:{x:0,y:0},starsPerGrid:2*e,width(){return this.end.x-this.start.x},height(){return this.end.y-this.start.y}});e1={update(){e2.requestUpdate&&(e2.starRenderDataTyped.position.data=new Float32Array(e2.starRenderData.position.data),e2.starRenderDataTyped.size.data=new Float32Array(e2.starRenderData.size.data),e2.requestUpdate=!1)},getData:()=>e2.starRenderData,getInfo:()=>({lod:e2.lodLevel}),spliceStars(e,t,r,n=[]){e2.requestUpdate=!0;let o=0;for(let t=0;t<e;++t){let e=this.getStarLOD(t);o+=e.width()*e.height()*e.starsPerGrid}let i=this.getStarLOD(e);r*=i.starsPerGrid,t*=i.starsPerGrid,t+=o;let a=e2.starRenderData.position.data,s=e2.starRenderData.size.data;if(0===n.length){a.splice(2*t,2*r),s.splice(t,r);return}let l=Array(2*n.length),u=Array(n.length);for(let e=0;e<n.length;++e){let[t,r]=n[e].position,o=n[e].size;l[2*e]=t,l[2*e+1]=r,u[e]=o}a.splice(2*t,2*r,...l),s.splice(t,r,...u)},removeStarRows(e,t,r){let n=this.getStarLOD(e),o=n.height(),i=n.width();for(;i--;)this.spliceStars(e,i*o+t,r);0===t?n.start.y+=r:n.end.y-=r},addStarRows(e,t,r){let n=this.getStarLOD(e),o=n.height(),i=r.length/n.width(),a=n.width();for(;a--;){let n=a*i,s=n+i;this.spliceStars(e,a*o+t,0,r.slice(n,s))}i/=n.starsPerGrid,0===t?n.start.y-=i:n.end.y+=i},removeStarColumns(e,t,r){let n=this.getStarLOD(e),o=n.height();this.spliceStars(e,t*o,r*o),0===t?n.start.x+=r:n.end.x-=r},addStarColumns(e,t,r){let n=this.getStarLOD(e),o=n.height();this.spliceStars(e,t*o,0,r);let i=r.length/o/n.starsPerGrid;0===t?n.start.x-=i:n.end.x+=i},getStarLOD:e=>e2.stars[e],setLodLevel(e){e2.lodLevel=e},MAX_LOD:8,data:e2};var e6={},e4={};e4=function(e){function t(t){(e=(0|t)%2147483647)<=0&&(e+=2147483646)}function r(){return e=48271*e%2147483647}return t(e),{seed:t,nextInt:r,nextFloat:function(){return(r()-1)/2147483646}}};const e5=e1.MAX_LOD;e6={generateViewportStars(e){let t=Math.max(0,Math.log2(e.z/10)),r=Math.max(0,Math.floor(t));e1.setLodLevel(t);for(let t=0;t<e5;++t)if(t<e5-r)this.generateViewportStarsLOD(e,t);else{let e=e1.getStarLOD(t);e1.spliceStars(t,0,e.width()*e.height()),e.start.x=0,e.start.y=0,e.end.x=0,e.end.y=0}},generateViewportStarsLOD(e,t){let r=2**(e5-t+8),n=e1.getStarLOD(t),{x:o,y:i}=e.screenSpaceToCoord(0,0),{x:a,y:s}=e.screenSpaceToCoord(innerWidth,innerHeight),l=Math.floor(o/r),u=Math.ceil(a/r),c=Math.ceil(s/r),f=Math.floor(i/r),d=n.start,m=n.end;if(c<d.y||f>m.y||l>m.x||u<d.x||0===n.width()||0===n.height()){let e=this.generateGrid(t,l,u,f,c);e1.spliceStars(t,0,n.width()*n.height(),e),d.x=l,d.y=f,m.x=u,m.y=c;return}if(c<m.y)e1.removeStarRows(t,n.height()-(m.y-c),m.y-c);else if(c>m.y){let e=this.generateGrid(t,d.x,m.x,m.y,c);e1.addStarRows(t,n.height(),e)}if(m.y=c,f>d.y)e1.removeStarRows(t,0,f-d.y);else if(f<d.y){let e=this.generateGrid(t,d.x,m.x,f,d.y);e1.addStarRows(t,0,e)}if(d.y=f,l>d.x)e1.removeStarColumns(t,0,l-d.x);else if(l<d.x){let e=this.generateGrid(t,l,d.x,d.y,m.y);e1.addStarColumns(t,0,e)}if(d.x=l,u<m.x)e1.removeStarColumns(t,n.width()-(m.x-u),m.x-u);else if(u>m.x){let e=this.generateGrid(t,m.x,u,d.y,m.y);e1.addStarColumns(t,n.width(),e)}m.x=u},generateGrid(e,t,r,n,o){let i=(r-t)*(o-n)*e*2,a=Array(i),s=0;for(let i=t;i<r;++i)for(let t=n;t<o;++t){let r=this.generateStarsInGrid(e,i,t);for(let e=0;e<r.length;++e)a[s++]=r[e]}return a},generateStarsInGrid(e,t,r){let n=2*e,o=2**(e5-e+8),i=Array(n),a=e4(o+(999*r+t));for(let e=0;e<n;++e){let n=(a.nextFloat()+t)*o,s=(a.nextFloat()+r)*o,l=(a.nextFloat()*o+o)/256;i[e]={position:[n,s],size:l}}return i},getStarAtCoord(e,t){let r=e1.data.starRenderData.position.data,n=e1.data.starRenderData.size.data;for(let o=0;o<n.length;++o){let i={x:r[2*o],y:r[2*o+1],size:n[o]},a=Math.sqrt((e-i.x)**2+(t-i.y)**2);if(a<i.size)return i}return null},coordToId:(e,t)=>(console.log(e=Number((e/100).toFixed(1)),t=Number((t/100).toFixed(1))),((e+t)*(e+t+1)/2+t).toString(36).replace(".","-")),IdToCoord(e){let t=parseInt(e.replace("-","."),36),r=Math.floor((Math.sqrt(1+8*t)-1)/2),n=(t-r*(r+1)/2)*100;return{x:(r-n)*100,y:n}}};var e9={};e9={setStat(e,t){$(`.${e}`).text(t)}};var e8={};e8=class{constructor(){this.start()}start(){this.startTime=performance.now()}stop(){return this.lap()}lapse(){let e=this.lap();return this.startTime=performance.now(),e}lap(){return Number((performance.now()-this.startTime).toFixed(1))}};const e7=document.querySelector(".viewport"),te=new n(e7),tt=new i(e7);tt.bindCamera(te);let tr=0,tn=[],to=[];requestAnimationFrame(function e(){++tr;let t=new e8;if(e6.generateViewportStars(te),tn.push(t.lapse()),tt.bindData(e1.getData()),tt.bindInfo(e1.getInfo()),tt.render(),to.push(t.lapse()),tr%10==0){let e=tn.reduce((e,t)=>e+t,0)/tn.length;tn=[];let t=to.reduce((e,t)=>e+t,0)/to.length;to=[],e9.setStat("process-time",Number(e.toFixed(1))),e9.setStat("render-time",Number(t.toFixed(1))),e9.setStat("total-time",Number((e+t).toFixed(1))),e9.setStat("fps",Number((1e3/(e+t)).toFixed(1))),e9.setStat("lod",Math.floor(e1.data.lodLevel))}requestAnimationFrame(e)}),$(".viewport").on("mousemove",function(e){let{x:t,y:r}=te.screenSpaceToCoord(e.pageX,e.pageY);e9.setStat("mouse-x",(t/100).toFixed(e1.data.lodLevel<=2)),e9.setStat("mouse-y",(-r/100).toFixed(e1.data.lodLevel<=2))}),$(".viewport").on("click",function(e){let{x:t,y:r}=te.screenSpaceToCoord(e.pageX,e.pageY),n=e6.getStarAtCoord(t,r);if(n){let e=e6.coordToId(n.x,n.y);e9.setStat("last-clicked-id",e)}}),$("#find-input").on("input",function(){if(console.log("input"),""==$(this).val())return;let{x:e,y:t}=e6.IdToCoord($(this).val());te.x=e,te.y=t});
//# sourceMappingURL=index.478aeb03.js.map
